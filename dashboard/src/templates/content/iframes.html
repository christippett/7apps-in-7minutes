<div class="column is-hidden-tablet">
  <p class="title is-4">Application IFrames</p>
  <p class="subtitle is-6">
    Live previews of each app.
  </p>
</div>
<div class="column is-half is-hidden-mobile">
  <div
    x-data="appDeploy()"
    :class="{ 'is-active': isActive }"
    class="log-container box px-0 py-0 is-relative is-clipped"
  >
    <div class="mask is-overlay px-4 py-4 is-flex">
      <button
        @click="deploy()"
        :class="{ 'is-loading': isLoading }"
        class="button is-black is-fullwidth"
      >
        <span class="icon is-small pr-3">
          <i class="mdi mdi-cloud-upload mdi-24px"></i>
        </span>
        <span>Deploy update</span>
      </button>
    </div>
    <div id="logs" class="logs is-overlay is-hidden">
      <p style="height: 50%; display: none;">
        Logs from Cloud Build will show here.
      </p>
    </div>
  </div>
</div>

{% for app in apps %}

<div id="{{ app.name }}" class="column is-half">
  <div class="box is-relative is-clipped px-0 py-0">
    <div class="frame-label">
      <a target="_blank" rel="noopener noreferrer" href="{{ app.url }}">{{ app.url }}</a>
    </div>
    <div
      id="{{ app.name }}-overlay"
      class="is-unavailable is-overlay px-6 py-6 is-size-6 has-text-weight-medium has-text-centered is-hidden"
    >
      <p class="heading">ðŸ›‘ {{ app.title }}</p>
      <p class="title is-size-5 mt-4"></p>
    </div>
    <iframe
      name="{{ unix_timestamp }}-{{ loop.index }}"
      src="{{ app.url }}?ts={{ unix_timestamp }}"
      width="100%"
      height="100%"
      class="noselect"
      data-id="{{ loop.index }}"
      data-url="{{ app.url }}"
      data-name="{{ app.name }}"
      data-title="{{ app.title }}"
      data-version="{{ app.version }}"
    >
    </iframe>
  </div>
</div>

{% endfor %}
